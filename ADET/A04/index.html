<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
  <link href="styles.css" rel="stylesheet">

</head>

<body>

  <nav class="navbar p-3" style="background-color: #f9f1e6;">
    <div class="container-fluid">
      <a class="navbar-brand d-flex align-items-center" href="?page=aboutus">
        <img src="dir/img/Logo.svg" style="height: 7vh;">
        <span class="h1 ms-2" style="font-family: Burger, sans-serif; color:#512315; ">Burger King</span>
      </a>
    </div>
  </nav>

  <div class="container-fluid mb-5">
    <div class="row pt-3">

      <div class="col-12 col-md-9">
        <div class="row">
          <div class="col pb-3">
            <div class="card overflow-auto p-3 topcontainer">
              <div class="d-flex flex-start flex-row categories" id="categories">
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <div class="card overflow-auto maincontainer">
              <div class="d-flex flex-start justify-content-sm-start justify-content-center flex-row flex-wrap main-card" id="maincontainer">

              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-3">
        <div class="card p-3 overflow-auto receiptcontainer" style="height: 100%;">
          <div id="receipt">
          </div>
          <div class="mt-4 d-flex flex-row justify-content-between">
            <div><b>TOTAL</b></div>
            <div><b id="totalValue">0</b></div>
          </div>
        </div>
      </div>
    </div>
    <script>
    var products = [];
    var total = 0;

    
    fetch('products.json')
        .then(response => response.json())
        .then(data => {
            products = data;
            loadCategories();
        });

    
    function loadCategories() {
        var categoriesContainer = document.getElementById("categories");
        categoriesContainer.innerHTML = ''; 

        
        products.forEach((product, index) => {
            categoriesContainer.innerHTML += `
                <div onclick="loadProducts(${index})" class="card mx-1 custom-button p-3 text-center">
                    <small>${product.category}</small>
                </div>
            `;
        });
    }

    
    function loadProducts(categoryIndex) {
        var maincontainer = document.getElementById("maincontainer");
        maincontainer.innerHTML = ''; 

        
        if (categoryIndex === 0) {
            products[categoryIndex].contents.forEach(content => {
                content.sizes.forEach(size => {
                    maincontainer.innerHTML += `
                        <div onclick="addToReceipt(${size.price}, '${content.code + size.code}')" class="card mx-1 my-2 custom-button content p-3 ms-4 text-center" style="background-color: ${content.color};" >
                            <small>${content.name} ${size.code}</small>
                        </div>
                    `;
                });
            });
        } else {
            products[categoryIndex].contents.forEach(content => {
                maincontainer.innerHTML += `
                    <div onclick="addToReceipt(${content.price}, '${content.code}')" class="card mx-1 my-2 custom-button content p-3 ms-3 text-center" style="background-color: ${content.color};">
                        <small>${content.name}</small>
                    </div>
                `;
            });
        }
    }

    
    function addToReceipt(price, code) {
        var receiptContainer = document.getElementById("receipt");
        total += parseFloat(price); 

        const totalValueElement = document.getElementById("totalValue"); 
        totalValueElement.innerHTML = total.toFixed(2); 

       
        receiptContainer.innerHTML += `
            <div class="d-flex flex-row justify-content-between">
                <div><small>${code}</small></div>
                <div><small>${price}</small></div>
            </div>
        `;
    }
</script>
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous">
    </script>
</body>

</html>